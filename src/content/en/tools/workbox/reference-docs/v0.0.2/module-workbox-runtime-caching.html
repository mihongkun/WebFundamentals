<!DOCTYPE html>
<html devsite>

<head>
  <meta name="project_path" value="_project.yaml" />
  <meta name="book_path" value="_book.yaml" />
  <meta name="gtm_var" data-key="docType" data-value="reference">
  <title>Module: workbox-runtime-caching</title>
  <link href="jsdoc.css" rel="stylesheet">
</head>

<body>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1><small></small><span class="symbol-name">workbox-runtime-caching</span></h1>
            <div class="symbol-detail-labels"><span class="label label-kind"><small>module</small></span></div>
            <p>
              <h1 id="workbox-runtime-caching">workbox-runtime-caching</h1>
            </p>
            <p>A service worker helper library that implements various runtime caching strategies.
            </p>
            <p><strong>Install:</strong> <code>npm install --save-dev workbox-runtime-caching</code></p>
            <p>You can learn more about each caching strategy on
              <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/">Jake Archibald's blog post</a> which covers various ways of handling fetch events with a service worker.</p>
            <p>These strategies can be used as
              <a href="module-workbox-routing.html#.RouteHandler">RouteHandlers</a> that are automatically invoked by the lower-level
              <a href="module-workbox-routing.Router.html">workbox-routing Router</a> or the higher-level <a href="module-workbox-sw.Router.html">SWLib Router</a> interfaces.
            </p>
          </header>
          <section>
            <h2>Classes</h2>
            <section id='members-links'>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.CacheFirst.html">CacheFirst</a></h3>
              <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network">cache-first</a> request strategy.</p>
              <p>The important thing to note with this caching strategy is that once a response is cached, it will not be updated. This is useful for assets that are revisioned as it caches the asset long term and doesn't waste the user's data.</p>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.CacheOnly.html">CacheOnly</a></h3>
              <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-only">cache-only</a> request strategy.</p>
              <p>The advantage to using this versus directly calling <code>caches.match()</code> is that it will use the cache configuration and trigger the plugins defined in the underlying <code>RequestWrapper</code>.</p>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.Handler.html">Handler</a></h3>
              <p>This a base class which each caching strategy extends.</p>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.NetworkFirst.html">NetworkFirst</a></h3>
              <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#network-falling-back-to-cache">network first</a> request strategy.</p>
              <p>By default, <code>NetworkFirst</code> will cache responses with a 200 status code as well as <a href="http://stackoverflow.com/q/39109789">opaque responses</a> (responses from cross-origin servers which don't support
                <a href="https://enable-cors.org/">CORS</a>). You can override this default by passing in a <code>RequestWrapper</code> that includes an appropriately-configured
                <code>CacheableResponsePlugin</code>.</p>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.NetworkOnly.html">NetworkOnly</a></h3>
              <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#network-only">network-only</a> request strategy.</p>
              <p>The advantage to using this versus directly calling <code>fetch()</code> is that it will trigger the plugins defined in the underlying <code>RequestWrapper</code>.</p>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.RequestWrapper.html">RequestWrapper</a></h3>
              <p>
                <p>This class is used by the various subclasses of <code>Handler</code> to configure the cache name and any desired plugins, which is to say classes that implement request lifecycle callbacks.</p>
              </p>
              <p>
                <p>It automatically triggers any registered callbacks at the appropriate time. The current set of plugin callbacks, along with the parameters they're given and when they're called, is:</p>
              </p>
              <ul>
                <li><code>cacheWillUpdate({request, response})</code>: Called prior to writing an entry to the cache, allowing the callback to decide whether or not the cache entry should be written.</li>
                <li><code>cacheDidUpdate({cacheName, oldResponse, newResponse, url})</code>: Called whenever an entry is written to the cache, giving the callback a chance to notify clients about the update or implement cache expiration.</li>
                <li><code>cacheWillMatch({cachedResponse})</code>: Called whenever a response is read from the cache and is about to be used, giving the callback a chance to perform validity/freshness checks.</li>
                <li><code>fetchDidFail({request})</code>: Called whenever a network request fails.</li>
              </ul>
              <h3 class="class-list"><a href="module-workbox-runtime-caching.StaleWhileRevalidate.html">StaleWhileRevalidate</a></h3>
              <p>An implementation of a <a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate">stale-while-revalidate</a> request strategy.</p>
              <p>Resources are requested from both the cache and the network in parallel, then responds with the cached version. The cache is replaced with whatever returns from the network. In addition to updating the appropriate caches, it will also trigger
                any appropriate plugins defined in the underlying
                <code>RequestWrapper</code>.</p>
              <p>This strategy is the closest equivalent to the sw-toolbox
                <a href="https://googlechrome.github.io/sw-toolbox/api.html#toolboxfastest">fastest</a> strategy.
              </p>
              <p>By default, <code>StaleWhileRevalidate</code> will cache responses with a 200 status code as well as <a href="http://stackoverflow.com/q/39109789">opaque responses</a> (responses from cross-origin servers which don't support
                <a href="https://enable-cors.org/">CORS</a>). You can override this default by passing in a <code>RequestWrapper</code> that includes an appropriately-configured
                <code>CacheableResponsePlugin</code>.</p>
            </section>
            <h2>Property</h2>
            <section>
              <h3 id=".exports.getDefaultCacheName" class="symbol-name">exports.getDefaultCacheName</h3>
              <div class="symbol-detail-labels"><span class="label label-constant"><small>constant</small></span>&nbsp;&nbsp;&nbsp;<span class="label label-static"><small>static</small></span></div>
              <p class="type-signature"></p>
              <p>The default cache name, used by
                <a href="module-workbox-runtime-caching.RequestWrapper.html">RequestWrapper</a> when there's no name provided.</p>
              <p>It combines a constant prefix with the <code>registration.scope</code> value associated with the current service worker, ensuring that multiple service workers used on the same origin will have different default caches.</p>
              <p>Calling this method without any parameters, this will return
                <code>workbox-runtime-caching-&lt;service worker scope&gt;</code>.</p>
              <p>If you pass in a cacheId, it will prepend this, returning:
                <code>&lt;cacheid&gt;-workbox-runtime-caching-&lt;service worker scope&gt;</code>.</p>
              <section>
                <table class="function param responsive">
                  <tr>
                    <th colspan="2">
                      <h4>Parameter</h4>
                    </th>
                  </tr>
                  <tbody>
                    <tr>
                      <td class="details-table-name">
                        <p>input</p>
                      </td>
                      <td>
                        <p class="details-table-types">Object</p>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </section>
              <dl class="dl-compact">
                <dt>Returns</dt>
                <dd>
                  <p><code>string</code>&nbsp;
                    <p>returns the default cache name used provided these parameters.
                    </p>
                  </p>
                </dd>
              </dl>
            </section>
          </section>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
</body>

</html>